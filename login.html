<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>
<style>
body { font-family: Arial; padding: 20px; background:#f2f2f2; display:flex; justify-content:center; align-items:center; min-height:100vh; }
.card { background:#fff; padding:25px; width:90%; max-width:350px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,.2); text-align:center; }
input { width:90%; padding:12px; margin:10px 0; font-size:16px; border-radius:8px; border:1px solid #ccc; }
button { width:90%; padding:12px; margin:8px 0; border:none; border-radius:8px; font-size:16px; cursor:pointer; background:linear-gradient(135deg,#667eea,#764ba2); color:#fff; }
button:hover { opacity:0.9; }
#login-error { color:red; font-size:14px; min-height:18px; margin-top:5px; }
.showhide { cursor:pointer; font-size:14px; color:#667eea; position:absolute; right:20px; top:50%; transform:translateY(-50%); user-select:none; }
.forgot { cursor:pointer; color:#db4437; font-size:14px; text-decoration:underline; display:block; margin-top:5px; }
#dashboard{display:none;}
.user{margin-top:10px;font-size:15px;}
</style>
</head>
<body>

<!-- LOGIN BOX -->
<div class="card" id="loginBox">
  <h2>Login / Signup</h2>
  <div style="position:relative;"><input type="email" id="email" placeholder="Email"></div>
  <div style="position:relative;">
    <input type="password" id="password" placeholder="Password">
    <span class="showhide" onclick="togglePassword()">Show</span>
  </div>

  <button onclick="signup()">Sign Up</button>
  <button onclick="login()">Login</button>
  <span class="forgot" onclick="resetPassword()">Forgot Password?</span>
  <div id="login-error"></div>
</div>

<!-- DASHBOARD -->
<div class="card" id="dashboard">
  <h2>Dashboard</h2>
  <div class="user" id="userInfo"></div>
  <button onclick="logout()">Logout</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js" defer></script>
<script src="firebase-app.js" defer></script>

<script defer>
const auth = firebase.auth();
const msg = document.getElementById("login-error");
const passwordInput = document.getElementById("password");

function signup(){
  msg.innerHTML="";
  auth.createUserWithEmailAndPassword(email.value,password.value)
  .then(()=> { msg.style.color="green"; msg.innerHTML="Signup successful! You can login now."})
  .catch(e=> { msg.style.color="red"; msg.innerHTML=e.message });
}

function login(){
  msg.innerHTML="";
  auth.signInWithEmailAndPassword(email.value,password.value)
  .then(()=> { msg.style.color="green"; msg.innerHTML="Login successful!" })
  .catch(e=> { msg.style.color="red"; msg.innerHTML=e.message });
}

function logout(){
  auth.signOut();
}

function togglePassword(){
  passwordInput.type = passwordInput.type === "password" ? "text" : "password";
}

function resetPassword(){
  if(email.value==="") {
    msg.style.color="red";
    msg.innerHTML="Enter your email to reset password";
    return;
  }
  auth.sendPasswordResetEmail(email.value)
  .then(()=> { msg.style.color="green"; msg.innerHTML="Password reset email sent!" })
  .catch(e=> { msg.style.color="red"; msg.innerHTML=e.message });
}

// Auth state
auth.onAuthStateChanged(user=>{
  if(user){
    loginBox.style.display="none";
    dashboard.style.display="block";
    userInfo.innerHTML = `<b>Email:</b> ${user.email}<br><b>UID:</b> ${user.uid}`;
  }else{
    loginBox.style.display="block";
    dashboard.style.display="none";
  }
});
</script>

</body>
</html>
