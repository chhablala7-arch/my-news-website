<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sitemap Generator</title>
</head>
<body>
<h2>Auto Sitemap Generator</h2>
<button onclick="generate()">Generate Sitemap</button>

<pre id="output" style="white-space:pre-wrap;background:#f5f5f5;padding:15px;margin-top:15px"></pre>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs }
from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

async function generate(){
  const snap = await getDocs(collection(db,"news"));
  let xml = `<?xml version="1.0" encoding="UTF-8"?>\n`;
  xml += `<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n`;

  // Homepage
  xml += `
  <url>
    <loc>https://chhablala7-arch.github.io/my-news-website/</loc>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>`;

  snap.forEach(doc=>{
    xml += `
  <url>
    <loc>https://chhablala7-arch.github.io/my-news-website/news.html?id=${doc.id}</loc>
    <changefreq>daily</changefreq>
    <priority>0.8</priority>
  </url>`;
  });

  xml += `\n</urlset>`;
  document.getElementById("output").innerText = xml;
}

</script>
</body>
</html>
