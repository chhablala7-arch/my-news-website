<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>News Home</title>

<style>
body { font-family: Arial; background:#f9f9f9; margin:0; padding:15px; }
h1 { text-align:center; color:#333; }

.news-item {
  background:#fff;
  padding:15px;
  margin:15px auto;
  border-radius:8px;
  max-width:600px;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
}
.news-item h3 { margin:0 0 10px; }
.news-item p { margin:0; }

.pop-btn{
  margin-top:10px;
  padding:8px 15px;
  background:#007bff;
  color:#fff;
  border:none;
  border-radius:5px;
  cursor:pointer;
}

#ad-banner, .inline-banner, #extra-ad {
  text-align:center;
  margin:20px 0;
}
.news-item img {
  width: 100%;
  max-height: 250px;
  object-fit: cover;
  border-radius: 6px;
  margin-bottom: 10px;
}
#native-ad{
  max-width:600px;
  margin:20px auto;
}

/* Desktop पर native hide */
@media (min-width:768px){
  #native-ad{ display:none; }
}
.news-card {
  background: #fff;
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.news-title {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 10px;
}
.news-excerpt {
  font-size: 15px;
  color: #333;
  line-height: 1.6;
}
.read-more {
  display: inline-block;
  margin-top: 12px;
  padding: 10px 16px;
  background: #1a73e8;
  color: #fff;
  text-decoration: none;
  border-radius: 6px;
  font-size: 14px;
}
</style>

<!-- ✅ Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4DDF4YYZ9K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-4DDF4YYZ9K');
</script>

</head>

<body>

<h1>Latest News</h1>

<!-- ✅ Native Ad (Mobile Only) -->
<div id="native-ad"></div>
<script async data-cfasync="false"
src="https://pl28637177.effectivegatecpm.com/fad14f1164a018aa8db8e8eb354764ac/invoke.js">
</script>

<!-- ✅ Top Banner -->
<div id="ad-banner"></div>
<script>
window.atOptions = {
  'key' : '156a5ae4a4cc8e1506a2cc3b96c9b641',
  'format' : 'iframe',
  'height' : 250,
  'width' : 300,
  'params' : {}
};
</script>
<script src="https://www.highperformanceformat.com/156a5ae4a4cc8e1506a2cc3b96c9b641/invoke.js"></script>

<!-- ✅ Extra Ad Script -->
<div id="extra-ad"></div>
<script src="https://pl28638101.effectivegatecpm.com/86/dc/61/86dc615d03616505d0012f407e25655d.js" async></script>

<!-- ✅ News List -->
<div id="newsList"></div>
<hr>
<h2>लेटेस्ट न्यूज</h2>

<ul id="autoNewsLinks"></ul>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs, query, orderBy } from
"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const newsList = document.getElementById("newsList");
const autoLinks = document.getElementById("autoNewsLinks");

async function loadNews(){
  newsList.innerHTML = "";
  autoLinks.innerHTML = "";

  const q = query(collection(db,"news"), orderBy("createdAt","desc"));
  const snapshot = await getDocs(q);

  let count = 0;
  snapshot.forEach(docSnap=>{
    const data = docSnap.data();

    const div = document.createElement("div");
    div.className = "news-item";
    div.innerHTML = `
      ${data.image ? `<img src="${data.image}" alt="${data.title}">` : ""}
      <h3>${data.title}</h3>
      <p>${data.content}</p>
      <small>Views: ${data.views ?? 0}</small>
    `;

    const btn = document.createElement("button");
    btn.className = "pop-btn";
    btn.innerText = "पूरी खबर पढ़ें";
    btn.onclick = ()=>{
      window.open("https://YOUR-POPUNDER-URL","_blank");
    };
    div.appendChild(btn);
    newsList.appendChild(div);
    count++;

    if(count % 5 === 0){
      const b = document.createElement("div");
      b.className = "inline-banner";
      newsList.appendChild(b);

      const s = document.createElement("script");
      s.src = "https://www.highperformanceformat.com/156a5ae4a4cc8e1506a2cc3b96c9b641/invoke.js";
      s.async = true;
      b.appendChild(s);
    }

    const li = document.createElement("li");
    const a = document.createElement("a");
    a.href = `./news/${docSnap.id}.html`;
    a.textContent = data.title;
    a.target = "_blank";
    li.appendChild(a);
    autoLinks.appendChild(li);
  });
}

loadNews();
</script>

</body>
</html>
