<!DOCTYPE html>
<html>
<head>
  <title>Admin Panel</title>

  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="firebase.js"></script>
</head>
<body>

<h2>Add News</h2>

<input id="title" placeholder="News Title"><br><br>
<textarea id="content" placeholder="News Content"></textarea><br><br>

<button onclick="addNews()">Add News</button>
<button onclick="logout()">Logout</button>

<script>
var db = firebase.firestore();

firebase.auth().onAuthStateChanged(user => {
  if (!user || user.email !== "admin@gmail.com") {
    location.href = "login.html";
  }
});

function addNews() {
  db.collection("news").add({
    title: title.value,
    content: content.value,
    time: firebase.firestore.FieldValue.serverTimestamp()
  }).then(() => {
    alert("News Added âœ…");
    title.value = "";
    content.value = "";
  });
}

function logout() {
  firebase.auth().signOut().then(() => {
    location.href = "login.html";
  });
}
</script>

</body>
</html>
